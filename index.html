<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√†i X·ªâu</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: linear-gradient(to bottom, #3b2a1a, #1a0d00);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: auto;
            position: relative;
        }
        .container {
            text-align: center;
            max-width: 100%;
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
        }
        .logo {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(to right, #ffeb3b, #ff9800);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            margin-bottom: 20px;
            border: 2px solid gold;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        .main-game {
            background: linear-gradient(to bottom, #d32f2f, #b71c1c);
            border: 4px solid gold;
            border-radius: 20px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 20px;
            min-height: 150px;
            flex-direction: column;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        .game-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .tai, .xiu {
            width: 45%;
            text-align: center;
        }
        .tai h2, .xiu h2 {
            font-size: 40px;
            font-weight: bold;
            margin: 0;
            cursor: pointer;
            text-transform: uppercase;
        }
        .tai h2 {
            color: black;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.7), 0 0 8px rgba(255, 255, 255, 0.5);
        }
        .xiu h2 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7), 0 0 8px rgba(0, 0, 0, 0.5);
        }
        .tai p, .xiu p {
            font-size: 20px;
            margin: 5px 0;
            color: gold;
            font-weight: bold;
            min-height: 24px; /* ƒê·∫∑t chi·ªÅu cao c·ªë ƒë·ªãnh ƒë·ªÉ c√¢n b·∫±ng */
        }
        .player-bet {
            font-size: 16px;
            color: #ffeb3b;
            min-height: 20px; /* ƒê·∫∑t chi·ªÅu cao c·ªë ƒë·ªãnh ƒë·ªÉ c√¢n b·∫±ng */
        }
        .history-section {
            font-size: 16px;
            color: #ffeb3b;
            text-align: center;
            margin-top: 10px;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 0;
            border-radius: 10px;
        }
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #d32f2f;
            border: 5px solid gold;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        .countdown-circle {
            width: 100px;
            height: 100px;
        }
        .countdown-circle svg {
            width: 100%;
            height: 100%;
        }
        .countdown-circle circle {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke 0.3s ease;
        }
        .countdown-circle .background {
            stroke: rgba(255, 255, 255, 0.3);
        }
        .countdown-circle .progress {
            stroke: #4caf50;
        }
        .countdown-circle.warning .progress {
            stroke: #ffeb3b;
        }
        .countdown-circle.danger .progress {
            stroke: #d32f2f;
        }
        .countdown-circle text {
            font-size: 20px;
            fill: white;
            font-weight: bold;
        }
        .dice-container {
            display: none;
            flex-direction: row;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }
        .dice {
            font-size: 25px;
            display: inline-block;
        }
        @keyframes spinDice {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .dice.spin {
            animation: spinDice 0.5s ease-in-out;
        }
        .bowl {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            display: none;
            z-index: 2;
        }
        @keyframes shake {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            50% { transform: translate(-50%, -50%) rotate(5deg); }
            75% { transform: translate(-50%, -50%) rotate(-5deg); }
            100% { transform: translate(-50%, -50%) rotate(0deg); }
        }
        @keyframes openBowl {
            0% { transform: translate(-50%, -50%); opacity: 1; }
            100% { transform: translate(-50%, -150%); opacity: 0; }
        }
        .shake-bowl {
            animation: shake 0.5s ease-in-out;
        }
        .open-bowl {
            animation: openBowl 1s forwards;
        }
        .bet-section {
            margin: 20px 0;
        }
        .bet-options {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .bet-btn {
            background: linear-gradient(to bottom, #ff9800, #e65100);
            color: white;
            border: 2px solid gold;
            padding: 8px 15px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s ease;
        }
        .bet-btn:hover {
            background: linear-gradient(to bottom, #fb8c00, #d84315);
            transform: scale(1.05);
        }
        .bet-btn.selected {
            background: linear-gradient(to bottom, #f57c00, #d32f2f);
            border: 2px solid white;
            transform: scale(1.05);
        }
        .action-buttons {
            margin-top: 10px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .action-btn {
            background: linear-gradient(to bottom, #ff9800, #e65100);
            color: white;
            border: 2px solid gold;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s ease;
        }
        .action-btn:hover {
            background: linear-gradient(to bottom, #fb8c00, #d84315);
            transform: scale(1.05);
        }
        .cancel-btn {
            background: linear-gradient(to bottom, #d81b60, #b71c1c);
        }
        .cancel-btn:hover {
            background: linear-gradient(to bottom, #c2185b, #9c1a1a);
        }
        #gameResult {
            font-size: 20px;
            font-weight: bold;
            margin-top: 10px;
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 10px;
            border: 1px solid gold;
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .blink {
            animation: blink 1s infinite;
        }
        #winEffect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
            color: gold;
            text-shadow: 0 0 10px #ffeb3b;
            display: none;
            z-index: 10;
        }
        @keyframes explode {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
        .explode {
            animation: explode 2s forwards;
        }
        .bottom-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, #4b3a1e, #3b2a1a);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid gold;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        .bottom-bar .balance {
            font-size: 18px;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
        }
        .bottom-bar button {
            background: linear-gradient(to bottom, #d81b60, #b71c1c);
            color: white;
            border: 2px solid gold;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s ease;
        }
        .bottom-bar button:hover {
            background: linear-gradient(to bottom, #c2185b, #9c1a1a);
            transform: scale(1.05);
        }
        @media (max-width: 600px) {
            .logo {
                font-size: 28px;
                padding: 8px;
            }
            .tai h2, .xiu h2 {
                font-size: 30px;
            }
            .tai p, .xiu p {
                font-size: 16px;
                min-height: 20px;
            }
            .player-bet {
                font-size: 14px;
                min-height: 16px;
            }
            .center-circle {
                width: 80px;
                height: 80px;
            }
            .countdown-circle {
                width: 80px;
                height: 80px;
            }
            .countdown-circle text {
                font-size: 16px;
            }
            .bet-btn {
                padding: 6px 12px;
                font-size: 14px;
            }
            .action-btn, .cancel-btn {
                padding: 8px 16px;
                font-size: 16px;
            }
            .dice {
                font-size: 20px;
            }
            .bowl {
                font-size: 50px;
            }
            .bottom-bar .balance {
                font-size: 16px;
            }
            .bottom-bar button {
                padding: 8px 16px;
                font-size: 14px;
            }
            #gameResult {
                font-size: 18px;
            }
            #winEffect {
                font-size: 40px;
            }
            .history-section {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <script>console.log</script>
    <div class="container">
        <div class="logo">T∆Ø·ªúNG T√ÄI X·ªàU</div>
        <div class="main-game">
            <div class="game-row">
                <div class="tai">
                    <h2 onclick="selectChoice('T√†i')">T√ÄI</h2>
                    <p id="taiPlayers"></p>
                    <p id="taiTotal">0</p>
                    <p class="player-bet" id="taiPlayerBet"></p>
                </div>
                <div class="center-circle">
                    <div id="countdown-circle" class="countdown-circle">
                        <svg viewBox="0 0 100 100">
                            <circle class="background" cx="50" cy="50" r="45"></circle>
                            <circle id="progress" class="progress" cx="50" cy="50" r="45" stroke-dasharray="282.6" stroke-dashoffset="0"></circle>
                            <text id="countdown-text" x="50" y="55" text-anchor="middle">30s</text>
                        </svg>
                    </div>
                    <span id="bowl" class="bowl">ü•£</span>
                    <div id="diceContainer" class="dice-container">
                        <span id="dice1" class="dice"></span>
                        <span id="dice2" class="dice"></span>
                        <span id="dice3" class="dice"></span>
                    </div>
                </div>
                <div class="xiu">
                    <h2 onclick="selectChoice('X·ªâu')">X·ªàU</h2>
                    <p id="xiuPlayers"></p>
                    <p id="xiuTotal">0</p>
                    <p class="player-bet" id="xiuPlayerBet"></p>
                </div>
            </div>
            <div class="history-section" id="history"></div>
        </div>
        <div class="bet-section">
            <div class="bet-options">
                <button class="bet-btn" onclick="selectBet(100)">100</button>
                <button class="bet-btn" onclick="selectBet(200)">200</button>
                <button class="bet-btn" onclick="selectBet(500)">500</button>
                <button class="bet-btn" onclick="selectBet(1000)">1000</button>
                <button class="bet-btn" onclick="selectBet(5000)">5000</button>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="placeBet()">C∆Ø·ª¢C</button>
                <button class="action-btn cancel-btn" onclick="cancelBet()">H·ª¶Y</button>
            </div>
        </div>
        <div id="gameResult"></div>
        <div id="winEffect"></div>
        <div class="bottom-bar">
            <div class="balance">S·ªë d∆∞: <span id="balance">2000</span></div>
            <div>
                <button onclick="deposit()">N·∫†P</button>
                <button>R√öT</button>
            </div>
        </div>
    </div>

    <script>
        let balance = 2000;
        let initialBalance = balance; // L∆∞u s·ªë d∆∞ ban ƒë·∫ßu c·ªßa m·ªói v√°n
        let currentBet = 0;
        let playerChoice = null;
        let countdown = 30;
        let timerInterval = null;
        let taiTotal = 0;
        let xiuTotal = 0;
        let playerTaiBet = 0;
        let playerXiuBet = 0;
        let gameInProgress = false;
        let previousResults = [];
        let taiPlayers = 0;
        let xiuPlayers = 0;
        let actualBet = 0; // S·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´ (d√πng ƒë·ªÉ t√≠nh th·∫Øng/thua)

        // Emoji s·ªë t·ª´ 0Ô∏è‚É£ ƒë·∫øn 9Ô∏è‚É£
        const numberEmojis = ['0Ô∏è‚É£', '1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£', '5Ô∏è‚É£', '6Ô∏è‚É£', '7Ô∏è‚É£', '8Ô∏è‚É£', '9Ô∏è‚É£'];

        // T·∫°o l·ªãch s·ª≠ ng·∫´u nhi√™n ban ƒë·∫ßu
        function generateRandomHistory() {
            const options = ['T√†i', 'X·ªâu'];
            for (let i = 0; i < 9; i++) {
                previousResults.push(options[Math.floor(Math.random() * 2)]);
            }
            updateHistory();
        }

        function updateBalance() {
            document.getElementById('balance').textContent = balance.toLocaleString();
        }

        function updateBets() {
            document.getElementById('taiTotal').textContent = taiTotal.toLocaleString();
            document.getElementById('xiuTotal').textContent = xiuTotal.toLocaleString();
            document.getElementById('taiPlayerBet').textContent = playerTaiBet > 0 ? playerTaiBet.toLocaleString() : '';
            document.getElementById('xiuPlayerBet').textContent = playerXiuBet > 0 ? playerXiuBet.toLocaleString() : '';
            document.getElementById('taiPlayers').textContent = taiPlayers > 0 ? numberEmojis[taiPlayers] : '';
            document.getElementById('xiuPlayers').textContent = xiuPlayers > 0 ? numberEmojis[xiuPlayers] : '';
        }

        function updateHistory() {
            const emojiMap = { 'T√†i': '‚ö´', 'X·ªâu': '‚ö™' };
            const resultString = previousResults.map(res => emojiMap[res]).join('');
            document.getElementById('history').textContent = resultString;
        }

        function deposit() {
            const amount = 10000;
            balance += amount; // TƒÉng s·ªë d∆∞
            if (gameInProgress) {
                initialBalance += amount; // C·∫≠p nh·∫≠t s·ªë d∆∞ ban ƒë·∫ßu c·ªßa v√°n hi·ªán t·∫°i
            }
            updateBalance();
        }

        function selectChoice(choice) {
            if (!gameInProgress || countdown <= 0) {
                alert('Ch·ªù v√°n m·ªõi ƒë·ªÉ ƒë·∫∑t c∆∞·ª£c!');
                return;
            }
            if (playerChoice && playerChoice !== choice) {
                alert('B·∫°n ƒë√£ ch·ªçn ' + playerChoice + ', nh·∫•n H·ª¶Y ƒë·ªÉ ch·ªçn l·∫°i!');
                return;
            }
            playerChoice = choice;
        }

        function selectBet(amount) {
            if (!playerChoice) {
                alert('Vui l√≤ng ch·ªçn T√†i ho·∫∑c X·ªâu tr∆∞·ªõc!');
                return;
            }
            // C·ªông d·ªìn s·ªë ti·ªÅn c∆∞·ª£c
            currentBet += amount; // T·ªïng c∆∞·ª£c l√† c∆∞·ª£c c≈© + c∆∞·ª£c m·ªõi
            // Gi·ªõi h·∫°n t·ªïng c∆∞·ª£c t·ªëi ƒëa b·∫±ng s·ªë d∆∞ ban ƒë·∫ßu c·ªßa v√°n
            if (currentBet > initialBalance) {
                currentBet = initialBalance; // T·ª± ƒë·ªông all-in
            }
            if (playerChoice === 'T√†i') {
                taiTotal = currentBet; // Hi·ªÉn th·ªã t·ªïng c∆∞·ª£c
                xiuTotal = 0;
                playerTaiBet = currentBet;
                playerXiuBet = 0;
                taiPlayers = Math.floor(Math.random() * 9) + 1;
                xiuPlayers = 0;
            } else {
                xiuTotal = currentBet; // Hi·ªÉn th·ªã t·ªïng c∆∞·ª£c
                taiTotal = 0;
                playerXiuBet = currentBet;
                playerTaiBet = 0;
                xiuPlayers = Math.floor(Math.random() * 9) + 1;
                taiPlayers = 0;
            }
            updateBets();
            // ƒê√°nh d·∫•u n√∫t c∆∞·ª£c ƒë∆∞·ª£c ch·ªçn
            document.querySelectorAll('.bet-btn').forEach(btn => {
                btn.classList.add('selected');
            });
        }

        function cancelBet() {
            if (actualBet > 0) {
                balance += actualBet; // Ho√†n l·∫°i s·ªë d∆∞ ƒë√£ tr·ª´
                actualBet = 0;
            }
            currentBet = 0;
            playerChoice = null;
            taiTotal = 0;
            xiuTotal = 0;
            playerTaiBet = 0;
            playerXiuBet = 0;
            taiPlayers = 0;
            xiuPlayers = 0;
            updateBets();
            updateBalance();
            document.querySelectorAll('.bet-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        function startCountdown() {
            if (gameInProgress) return;
            gameInProgress = true;

            initialBalance = balance; // L∆∞u s·ªë d∆∞ ban ƒë·∫ßu c·ªßa v√°n

            countdown = 30;
            const progressCircle = document.getElementById('progress');
            const countdownText = document.getElementById('countdown-text');
            const countdownCircle = document.getElementById('countdown-circle');
            countdownText.textContent = `${countdown}s`;
            progressCircle.setAttribute('stroke-dashoffset', 0);
            document.getElementById('bowl').style.display = 'none';
            document.getElementById('diceContainer').style.display = 'none'; // ·∫®n x√∫c x·∫Øc ngay khi b·∫Øt ƒë·∫ßu v√°n m·ªõi
            document.getElementById('dice1').textContent = ''; // ƒê·∫∑t l·∫°i n·ªôi dung x√∫c x·∫Øc
            document.getElementById('dice2').textContent = '';
            document.getElementById('dice3').textContent = '';
            document.getElementById('countdown-circle').style.display = 'block';
            document.getElementById('gameResult').style.display = 'none';
            document.getElementById('gameResult').textContent = ''; // ƒê·∫∑t l·∫°i n·ªôi dung k·∫øt qu·∫£
            document.getElementById('winEffect').style.display = 'none';
            document.getElementById('winEffect').textContent = ''; // ƒê·∫∑t l·∫°i n·ªôi dung hi·ªáu ·ª©ng th·∫Øng

            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                countdown--;
                countdownText.textContent = `${countdown}s`;
                const offset = (countdown / 30) * 282.6;
                progressCircle.setAttribute('stroke-dashoffset', 282.6 - offset);

                if (countdown <= 10) {
                    countdownCircle.classList.add('danger');
                } else if (countdown <= 20) {
                    countdownCircle.classList.add('warning');
                } else {
                    countdownCircle.classList.remove('warning', 'danger');
                }

                if (countdown <= 0) {
                    clearInterval(timerInterval);
                    showBowlAndPlay();
                }
            }, 1000);
        }

        function showBowlAndPlay() {
            document.getElementById('countdown-circle').style.display = 'none';
            document.getElementById('bowl').style.display = 'block';
            document.getElementById('diceContainer').style.display = 'flex';
            setTimeout(() => playGame(), 2000); // T·ª± ƒë·ªông m·ªü b√°t sau 2 gi√¢y
        }

        function rollDice() {
            return Math.floor(Math.random() * 6) + 1;
        }

        function placeBet() {
            if (!gameInProgress || countdown <= 0) {
                alert('Ch·ªù v√°n m·ªõi ƒë·ªÉ ƒë·∫∑t c∆∞·ª£c!');
                return;
            }

            if (!playerChoice) {
                alert('Vui l√≤ng ch·ªçn T√†i ho·∫∑c X·ªâu!');
                return;
            }

            if (currentBet === 0) {
                alert('Vui l√≤ng ch·ªçn m·ª©c c∆∞·ª£c!');
                return;
            }

            // Tr·ª´ s·ªë d∆∞ ngay khi nh·∫•n "C∆Ø·ª¢C"
            let amountToDeduct = currentBet - actualBet; // S·ªë ti·ªÅn c·∫ßn tr·ª´ th√™m
            if (amountToDeduct > balance) {
                amountToDeduct = balance; // All-in: Ch·ªâ tr·ª´ s·ªë ti·ªÅn b·∫±ng s·ªë d∆∞
            }
            balance -= amountToDeduct;
            actualBet += amountToDeduct; // C·ªông d·ªìn s·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´
            updateBalance();
        }

        function playGame() {
            const dice1 = rollDice();
            const dice2 = rollDice();
            const dice3 = rollDice();
            const total = dice1 + dice2 + dice3;

            // ƒê·∫∑t l·∫°i n·ªôi dung x√∫c x·∫Øc tr∆∞·ªõc khi hi·ªÉn th·ªã m·ªõi
            document.getElementById('dice1').textContent = '';
            document.getElementById('dice2').textContent = '';
            document.getElementById('dice3').textContent = '';

            const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
            document.getElementById('dice1').textContent = diceEmojis[dice1 - 1];
            document.getElementById('dice2').textContent = diceEmojis[dice2 - 1];
            document.getElementById('dice3').textContent = diceEmojis[dice3 - 1];

            const bowl = document.getElementById('bowl');
            bowl.classList.add('shake-bowl');
            setTimeout(() => bowl.classList.add('open-bowl'), 1000);
            setTimeout(() => {
                document.querySelectorAll('.dice').forEach(dice => dice.classList.add('spin'));
            }, 1500);

            let result = '';
            let roundResult = '';
            let isWin = false;

            if (total >= 11 && total <= 18) {
                roundResult = 'T√†i';
                if (playerChoice === 'T√†i') {
                    result = `+${actualBet * 2}`; // D√πng actualBet ƒë·ªÉ t√≠nh ti·ªÅn th·∫Øng
                    balance += actualBet * 2; // Th·∫Øng th√¨ c·ªông l·∫°i g·∫•p ƒë√¥i s·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´
                    isWin = true;
                } else if (playerChoice) {
                    result = `-${actualBet}`; // Thua th√¨ hi·ªÉn th·ªã s·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´
                }
            } else {
                roundResult = 'X·ªâu';
                if (playerChoice === 'X·ªâu') {
                    result = `+${actualBet * 2}`; // D√πng actualBet ƒë·ªÉ t√≠nh ti·ªÅn th·∫Øng
                    balance += actualBet * 2; // Th·∫Øng th√¨ c·ªông l·∫°i g·∫•p ƒë√¥i s·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´
                    isWin = true;
                } else if (playerChoice) {
                    result = `-${actualBet}`; // Thua th√¨ hi·ªÉn th·ªã s·ªë ti·ªÅn th·ª±c t·∫ø ƒë√£ tr·ª´
                }
            }

            previousResults.push(roundResult);
            if (previousResults.length > 9) previousResults.shift();
            updateHistory();

            // Hi·ªÉn th·ªã k·∫øt qu·∫£ sau 2 gi√¢y (sau khi m·ªü b√°t v√† x√∫c x·∫Øc xoay xong)
            setTimeout(() => {
                const gameResult = document.getElementById('gameResult');
                gameResult.textContent = ''; // ƒê·∫∑t l·∫°i n·ªôi dung k·∫øt qu·∫£ tr∆∞·ªõc khi hi·ªÉn th·ªã m·ªõi
                if (playerChoice) {
                    gameResult.textContent = `${result} (T·ªïng: ${total})`;
                    gameResult.style.display = 'block';
                    if (isWin) {
                        const winEffect = document.getElementById('winEffect');
                        winEffect.textContent = result;
                        winEffect.style.display = 'block';
                        winEffect.classList.add('explode'); // Hi·ªáu ·ª©ng "n·ªï" gi·ªØa m√†n h√¨nh
                    } else {
                        gameResult.classList.add('blink');
                    }
                }
                updateBalance();

                // ƒê·∫£m b·∫£o x√∫c x·∫Øc v√† k·∫øt qu·∫£ hi·ªÉn th·ªã trong 5 gi√¢y
                setTimeout(() => {
                    // Sau 5 gi√¢y hi·ªÉn th·ªã k·∫øt qu·∫£, reset game
                    resetGame();
                }, 5000); // 5 gi√¢y hi·ªÉn th·ªã k·∫øt qu·∫£
            }, 2000); // Ch·ªù 2 gi√¢y ƒë·ªÉ m·ªü b√°t v√† xoay x√∫c x·∫Øc
        }

        function resetGame() {
            taiTotal = 0;
            xiuTotal = 0;
            playerTaiBet = 0;
            playerXiuBet = 0;
            currentBet = 0;
            actualBet = 0;
            playerChoice = null;
            gameInProgress = false;
            taiPlayers = 0;
            xiuPlayers = 0;
            updateBets();
            document.querySelectorAll('.bet-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById('gameResult').textContent = 'Ch·ªçn T√†i ho·∫∑c X·ªâu v√† ƒë·∫∑t c∆∞·ª£c!';
            document.getElementById('gameResult').style.display = 'block';
            startCountdown();
        }

        generateRandomHistory();
        startCountdown();
    </script>
</body>
</html>
